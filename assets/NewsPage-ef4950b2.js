import{X as S,c as u,g as _,i as N,A as y,B as b,o as e,b as s,e as f,f as l,F as h,j as k,n as z,t as g,m as L,Y as A,C as E,k as m,l as P,T as F,G as T}from"./index-c0c8fa2e.js";const j={class:"news"},D={"data-aos":"fade-down",class:"news__title"},G=f("h2",null,"новости",-1),O={key:0},U={key:0,"data-aos":"fade-down",class:"news__filter"},X={class:"news__filter-wrapper"},Y=["onClick"],q={key:1,"data-aos":"fade-down",class:"news__cards"},H={__name:"News",emits:["newsLoaded"],setup(x,{emit:i}){const w=i,t=S(),n=u(()=>t.categories),o=u(()=>t.newsArr),r=_(null),B=u(()=>t.totalNewsCount),p=_(!1),d=_(!1),v=()=>{p.value=window.matchMedia("(max-width:480px)").matches},M=u(()=>n.value.length>4),V=async c=>{r.value===c?(r.value=null,await t.getNews()):(r.value=c,await t.getNews(!1,c))},$=()=>{t.getNews(!0)};return N(async()=>{y.refresh(),await t.getCategories(),await t.getNews(),w("newsLoaded"),v(),window.addEventListener("resize",v)}),b(()=>{window.removeEventListener("resize",v)}),(c,C)=>(e(),s("div",j,[f("div",D,[G,p.value?(e(),s("span",O,"категория")):l("",!0)]),n.value&&n.value.length?(e(),s("div",U,[f("div",X,[(e(!0),s(h,null,k(d.value?n.value:n.value.slice(0,4),a=>(e(),s("button",{onClick:I=>V(a.id),key:a.id,class:z(["news__filter-btn",{active:a.id===r.value}])},g(a.title),11,Y))),128))]),M.value?(e(),s("button",{key:0,onClick:C[0]||(C[0]=a=>d.value=!d.value),class:"news__filter-more"},g(d.value?"скрыть":"посмотреть все..."),1)):l("",!0)])):l("",!0),o.value&&o.value.length?(e(),s("div",q,[(e(!0),s(h,null,k(o.value,a=>(e(),L(A,{item:a,key:a.id},null,8,["item"]))),128))])):l("",!0),o.value.length<B.value?(e(),s("button",{key:2,onClick:$,class:"news__more"}," загрузить еще... ")):l("",!0)]))}},K={__name:"NewsPage",setup(x){const i=_(!1),w=()=>{i.value=!0,document.body.classList.remove("no-scroll")};return N(()=>{y.refresh(),document.body.classList.add("no-scroll")}),b(()=>{i.value||document.body.classList.remove("no-scroll")}),(t,n)=>{const o=E("Preloader");return e(),s(h,null,[m(F,{name:"preloader"},{default:P(()=>[i.value?l("",!0):(e(),L(o,{key:0}))]),_:1}),m(H,{onNewsLoaded:w}),m(T)],64)}}};export{K as default};
